From 1c9d8260c8f3f0e15200303d5618c65cf95ff313 Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Thu, 27 Jun 2013 16:44:38 +0300
Subject: ARM: i.MX6: cm-fx6: add LVDS display support

Add the LVDS init code.
---
 arch/arm/mach-mx6/board-cm-fx6.c |   21 ++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

diff --git a/arch/arm/mach-mx6/board-cm-fx6.c b/arch/arm/mach-mx6/board-cm-fx6.c
index 7514acc..c5d5b60 100644
--- a/arch/arm/mach-mx6/board-cm-fx6.c
+++ b/arch/arm/mach-mx6/board-cm-fx6.c
@@ -1018,7 +1018,13 @@ static struct ipuv3_fb_platform_data cm_fx6_fb_data[] = {
 		.mode_str               = "1280x720M@50",
 		.default_bpp            = 24,
 		.int_clk                = false,
-	},
+	}, {
+		.disp_dev          = "ldb",
+		.interface_pix_fmt = IPU_PIX_FMT_RGB666,
+		.mode_str          = "1366x768M-18@60",
+		.default_bpp       = 18,
+		.int_clk           = false,
+	}
 };
 
 static struct fsl_mxc_lcd_platform_data cm_fx6_lcdif_data = {
@@ -1027,6 +1033,13 @@ static struct fsl_mxc_lcd_platform_data cm_fx6_lcdif_data = {
 	.default_ifmt	= IPU_PIX_FMT_RGB666,
 };
 
+static struct fsl_mxc_ldb_platform_data cm_fx6_ldb_data = {
+	.ipu_id      = 1,
+	.disp_id     = 0,
+	.ext_ref     = 1,
+	.mode        = LDB_SIN0,
+};
+
 static struct imx_ipuv3_platform_data ipu_data[] = {
 	{
 		.rev		= 4,
@@ -1074,6 +1087,12 @@ static void __init cm_fx6_init_display(void)
 	if (IS_ERR(pdev))
 		pr_err("%s: lcd interface register failed: %ld\n",
 		       __func__, PTR_ERR(pdev));
+
+	pdev = imx6q_add_ldb(0, &cm_fx6_ldb_data);
+	if (IS_ERR(pdev))
+		pr_err("%s: ldb interface register failed: %ld\n",
+			__func__, PTR_ERR(pdev));
+
 }
 #else /* CONFIG_FB_MXC_SYNC_PANEL */
 static inline void cm_fx6_init_display(void) {}
-- 
1.7.9.5

